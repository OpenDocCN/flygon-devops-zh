# 前言

Docker 是一个开源的基于容器的平台，可以让任何人在任何地方一致地开发和部署稳定的应用程序。Docker 在创建可扩展和可移植环境方面提供了速度、简单性和安全性。随着 Docker 在现代微服务和 N 层应用的容器化中的出现和普及，有效地解决生产级部署的自动化工作流程是明智且必要的。

# 本书内容

第一章，理解容器场景和 Docker 概述，介绍了基本的容器化概念，以应用程序和基于操作系统的容器为例。我们将介绍 Docker 技术、其优势以及 Docker 容器的生命周期。

第二章，Docker 安装，将介绍在各种 Linux 发行版上安装 Docker 的步骤 - Ubuntu，CoreOS，CentOS，Red Hat Linux，Fedora 和 SUSE Linux。

第三章，构建基础和分层镜像，教授了在生产就绪的应用容器化中构建镜像的重要任务。我们还将讨论如何手动从头开始构建镜像。接下来，我们将详细探讨使用 Dockerfile 构建分层镜像，并列出 Dockerfile 命令。

第四章，设计微服务和 N 层应用，将探讨从开发到测试无缝设计的示例环境，消除了手动和容易出错的资源配置和配置的需求。在这样做的过程中，我们将简要介绍微服务应用程序如何进行测试、自动化、部署和管理。

第五章，移动容器化应用，将介绍 Docker 注册表。我们将从使用 Docker Hub 的 Docker 公共存储库的基本概念开始，以及与更大观众共享容器的用例。Docker 还提供了部署私有 Docker 注册表的选项，我们将探讨这一点，该注册表可用于在组织内部推送、拉取和共享 Docker 容器。

第六章，“使容器工作”，将教你关于特权容器，它们可以访问所有主机设备，以及超级特权容器，它们表明容器可以运行后台服务，用于在 Docker 容器中运行服务以管理底层主机。

第七章，“管理 Docker 容器的网络堆栈”，将解释 Docker 网络是如何通过 Docker0 桥接进行配置和故障排除的。我们还将探讨 Docker 网络与外部网络之间的通信问题的故障排除。我们将研究使用不同网络选项（如 Weave、OVS、Flannel 和 Docker 的最新覆盖网络）在多个主机之间进行容器通信，并比较它们以及它们配置中涉及的故障排除问题。

第八章，“使用 Kubernetes 管理 Docker 容器”，解释了如何借助 Kubernetes 管理 Docker 容器。我们将涵盖许多部署场景和在裸机、AWS、vSphere 或使用 minikube 部署 Kubernetes 时的故障排除问题。我们还将探讨有效部署 Kubernetes pods 和调试 Kubernetes 问题。

第九章，“挂载卷包”，将深入探讨与 Docker 相关的数据卷和存储驱动器概念。我们将讨论使用四种方法来故障排除数据卷，并研究它们的优缺点。存储数据在 Docker 容器内部的第一种情况是最基本的情况，但它不提供在生产环境中管理和处理数据的灵活性。第二和第三种情况是使用仅存储数据的容器或直接存储在主机上的情况。第四种情况是使用第三方卷插件，如 Flocker 或 Convoy，它将数据存储在单独的块中，即使容器从一个主机转移到另一个主机，或者容器死亡，也能提供数据的可靠性。

第十章，“在公共云中部署 Docker - AWS 和 Azure”，概述了在 Microsoft Azure 和 AWS 公共云上部署 Docker。

# 本书所需内容

您需要在 Windows、Mac OS 或 Linux 机器上安装 Docker 1.12+。可能需要 AWS、Azure 和 GCE 的公共云账户，这些在各章节的相应部分中提到。

# 本书适合对象

本书旨在帮助经验丰富的解决方案架构师、开发人员、程序员、系统工程师和管理员解决 Docker 容器化的常见问题。如果您希望构建用于自动部署的生产就绪的 Docker 容器，您将能够掌握和解决 Docker 的基本功能和高级功能。熟悉 Linux 命令行语法、单元测试、Docker 注册表、GitHub 以及领先的容器托管平台和云服务提供商（CSP）是先决条件。在本书中，您还将了解避免首次进行故障排除的方法和手段。

# 约定

在本书中，您将找到一些文本样式，用于区分不同类型的信息。以下是一些样式的示例及其含义解释。

文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄显示如下：“使用`start_k8s.sh` shell 脚本重新启动集群。”

代码块设置如下：

[PRE0]

任何命令行输入或输出都以以下形式书写：

[PRE1]

**新术语**和**重要单词**以粗体显示。您在屏幕上看到的单词，例如菜单或对话框中的单词，会在文本中显示为：“指定**堆栈名称**、**密钥对**和集群 3。”

### 注意

警告或重要说明显示在这样的框中。

### 提示

提示和技巧显示如下。
