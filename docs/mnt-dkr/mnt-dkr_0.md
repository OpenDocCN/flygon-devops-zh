# 前言

随着 Docker 容器的采用增加，监视正在运行的容器、它们正在消耗的资源以及它们如何影响系统整体性能的需求已成为一个与时间相关的需求。*监控 Docker*将教会您如何监视容器，并密切关注应用程序的工作方式，以提高在 Docker 上运行的应用程序的整体性能。

本书将介绍如何使用 Docker 的原生监控功能、各种插件以及帮助监控的第三方工具来监控容器。本书首先将介绍如何获取活动容器的详细统计信息、消耗的资源和容器行为。本书还将向读者展示如何利用这些统计数据来提高系统的整体性能。

# 本书涵盖内容

第一章 *介绍 Docker 监控*，讨论了与监视传统服务器（如虚拟机、裸机和云实例）相比，监视容器有多么不同（宠物与牛群、鸡与雪花）。本章还详细介绍了本书后面示例中涵盖的操作系统，并简要介绍了如何使用 vagrant 搭建本地测试环境，以便轻松地遵循安装说明和实际示例。

第二章 *使用内置工具*，帮助您了解从原始 Docker 安装中可以获得的基本指标，以及如何使用它们。此外，我们将了解如何获取正在运行的容器的实时统计信息，如何使用我们熟悉的命令，以及如何获取启动为每个容器的一部分的进程信息。

第三章 *高级容器资源分析*，介绍了来自 Google 的 cAdvisor，它为 Docker 提供的基本工具增加了更多精度。您还将学习如何安装 cAdvisor 并开始收集指标。

第四章，“监控容器的传统方法”，介绍了一种用于监控服务的传统工具。通过本章，您应该了解 Zabbix 以及您可以监控容器的各种方式。

第五章，“使用 Sysdig 进行查询”，描述了 Sysdig 作为“一个开源的系统级探索工具，用于捕获运行中 Linux 实例的系统状态和活动，然后保存、过滤和分析它。”在本章中，您将学习如何使用 Sysdig 实时查看容器的性能指标，并记录会话以供以后查询。

第六章，“探索第三方选项”，为您介绍了一些可用的软件即服务（SaaS）选项，以及为什么要使用它们，以及如何在主机服务器上安装它们的客户端。

第七章，“从容器内部收集应用程序日志”，探讨了如何将容器内运行的应用程序的日志文件内容传输到一个中央位置，以便即使您必须销毁和替换容器，这些日志也是可用的。

第八章，“接下来该做什么？”，探讨了在监控容器方面可以采取的下一步措施，讨论了将警报添加到监控中的好处。此外，我们将涵盖一些不同的场景，并查看哪种类型的监控适合每种场景。

# 本书所需内容

为了确保体验尽可能一致，我们将安装 vagrant 和 VirtualBox 来运行作为主机运行我们的容器的虚拟机。Vagrant 适用于 Linux、OS X 和 Windows；有关安装方法的详细信息，请参阅 vagrant 网站[`www.vagrantup.com/`](https://www.vagrantup.com/)。有关如何下载和安装 VirtualBox 的详细信息，请参阅[`www.virtualbox.org/`](https://www.virtualbox.org/)；同样，VirtualBox 可以安装在 Linux、OS X 和 Windows 上。

# 本书适合谁？

本书适用于希望管理 Docker 容器的 DevOps 工程师和系统管理员，希望使用专业技术和方法更好地管理这些容器，并更好地维护基于 Docker 构建的应用程序。

# 约定

在本书中，您将找到一些文本样式，用于区分不同类型的信息。以下是一些这些样式的示例及其含义的解释。

文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 用户名显示如下："我们可以通过使用`include`指令来包含其他上下文。"

代码块设置如下：

[PRE0]

当我们希望引起您对代码块的特定部分的注意时，相关行或项目将以粗体显示：

[PRE1]

任何命令行输入或输出都以以下方式编写：

[PRE2]

**新术语**和**重要单词**以粗体显示。您在屏幕上看到的单词，例如菜单或对话框中的单词，会以这样的方式出现在文本中："单击**下一步**按钮将您移至下一个屏幕。"

### 注意

警告或重要提示会出现在这样的框中。

### 提示

提示和技巧会以这样的方式出现。
